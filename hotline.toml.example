# HotLine Configuration File
# This file contains default configuration for the HotLine daemon.
# Copy this file to $XDG_CONFIG_DIR/hotline/hotline.toml or ~/.config/hotline/hotline.toml
# 
# Configuration precedence (highest to lowest):
# 1. Command-line arguments
# 2. Environment variables
# 3. This TOML configuration file
# 4. Default values

# OpenAI API configuration
openai_api_key = "your-api-key-here"  # Can also be set via OPENAI_API_KEY env var
# openai_base_url = "https://api.openai.com"  # Optional: custom API endpoint

# Real-time transcription model
# Options: "whisper-1", "gpt-4o-transcribe", "gpt-4o-mini-transcribe"
realtime_model = "whisper-1"

# Audio configuration
audio_buffer_duration_seconds = 300  # 5 minutes
audio_sample_rate = 16000  # Optimized for Whisper
audio_channels = 1  # Mono

# Whisper transcription settings
whisper_model = "whisper-1"
whisper_language = "auto"  # or specify like "en", "es", etc.
whisper_timeout_seconds = 60
whisper_max_retries = 3

# Audio feedback settings
enable_audio_feedback = true
beep_volume = 0.1  # Range: 0.0 to 1.0

# Logging
rust_log = "info"  # Options: trace, debug, info, warn, error

# Transcription profiles
# Define named profiles for different transcription scenarios

[profiles.default]
model = "whisper-1"
language = "en"

[profiles.coding]
model = "whisper-1"
language = "en"
prompt = "The user is a programmer, so expect technical terms."

# Example hooks for lifecycle events
# Hooks allow running commands at different stages of transcription
# [profiles.coding.hooks.on_transcription_start]
# type = "spawn"
# command = ["notify-send", "Recording started"]

# [profiles.coding.hooks.on_transcription_receive]
# type = "spawn_with_stdin"  # Text is piped to stdin
# command = ["wl-copy"]

# [profiles.coding.hooks.on_transcription_stop]
# type = "spawn"
# command = ["notify-send", "Recording stopped"]

[profiles.spanish]
model = "whisper-1"
language = "es"
prompt = "El usuario habla español."

[profiles.coding-spanish]
model = "gpt-4o-mini-transcribe"  # Using GPT-4o mini transcribe instead of whisper
language = "es"
prompt = "El usuario es un programador escribiendo código. Espera términos técnicos de programación, nombres de funciones, variables en inglés mezclados con español."
# Semantic VAD configuration for better context understanding
vad_config = { SemanticVad = { eagerness = "medium" } }

# Example hook to type the transcribed text using xdotool
# [profiles.coding-spanish.hooks.on_transcription_receive]
# type = "spawn_with_stdin"
# command = ["xdotool", "type", "--file", "-"]

[profiles.meeting]
model = "whisper-1"
language = "auto"
prompt = "This is a business meeting with multiple speakers."

# Example hooks for meeting transcription with notifications
# [profiles.meeting.hooks.on_transcription_start]
# type = "spawn"
# command = ["sh", "-c", "echo 'Meeting started at $(date)' >> /tmp/meeting_log.txt"]

# [profiles.meeting.hooks.on_transcription_receive]
# type = "spawn_with_stdin"
# command = ["tee", "-a", "/tmp/meeting_transcript.txt"]

# [profiles.meeting.hooks.on_transcription_stop]
# type = "spawn"
# command = ["sh", "-c", "echo 'Meeting ended at $(date)' >> /tmp/meeting_log.txt"]

# Complete example with all hooks configured
[profiles.full-example]
model = "whisper-1"
language = "en"
prompt = "General transcription with full lifecycle hooks"

# Hook executed when transcription starts
[profiles.full-example.hooks.on_transcription_start]
type = "spawn"
command = ["notify-send", "HotLine", "Recording started"]

# Hook executed when transcription text is received
[profiles.full-example.hooks.on_transcription_receive]
type = "spawn_with_stdin"  # Text is piped to stdin
command = ["wl-copy"]  # Copy to clipboard

# Hook executed when transcription stops
[profiles.full-example.hooks.on_transcription_stop]
type = "spawn"
command = ["notify-send", "HotLine", "Recording stopped"]